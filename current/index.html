<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>LCMAP @ USGS EROS - System Documentation</title>

    <link href="css/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="css/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="js/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["shell"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <div class="content"><span class="title">LCMAP @ USGS EROS - System Documentation</span></div>
      </span>
    </a>
    <div class="tocify-wrapper">
      <div class="content">
        <div class="logo">
        </div>
        <span class="title">LCMAP @ USGS EROS - System Documentation</span></div>
        <div class="lang-selector">
              <a href="#" data-language-name="shell">Bash</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/USGS-EROS/lcmap-system/'>View the source</a></li>
            <li><a href='http://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="introduction">Introduction</h1>

<p><em>System Deployment Documentation for LCMAP</em></p>

<p><a href="images/lcmap-logo-1-1000px.png"><img src="images/lcmap-logo-1-250px.png" /></a></p>

<h2 id="about-lcmap">About LCMAP</h2>

<p>The intent of the Land Change Monitoring Assessment and Projection (LCMAP) initiative is to enable analysis of a very large amount of continuously acquired data to understand historical trends, assess current states, and project future states at regular intervals.</p>

<p>The system capacity and functionality needed to support the magnitude of long-term time series analysis is expected to employ Earth data science, demanding highly specialized computing environments to execute large scale analysis.</p>

<h3 id="land-change">Land Change</h3>

<p>Land-change science is about understanding changes in the type, intensity, condition, and location of land use and cover as indications of possible impacts to and from the interactions between people and nature.</p>

<p>Toward this aim, the LCMAP system&rsquo;s goals are to:</p>

<ol>
<li><p>Provide users and science models with direct access to a vast amount of Analysis Ready Data.</p></li>
<li><p>Assess and project changes to land cover, use, and condition.</p></li>
<li><p>Provide science users the means to continuously monitor and classify changes.</p></li>
<li><p>Support decision making relevant to environmental management and policy.</p></li>
<li><p>Enable discovery and distribution of information derived by science models through many channels, to many user communities.</p></li>
</ol>

<h3 id="system-architecture">System Architecture</h3>

<p>The system architecture and the components of which it is comprised has been designed to fulfill the LCMAP science user experience:</p>

<ol>
<li><p>Access and Exploration - enables discovery, visualization, reporting, notification, and other access methods via REST resources and GIS standards for services and file formats.</p></li>
<li><p>Subscription and notification services - allows science users to continuously monitor land change data for events of particular interest.</p></li>
<li><p>Science Execution Environment (SEE) - enables rapid development, production, validation and deployment of science models.</p></li>
<li><p>Information Warehouse and Data Store - contains decades of Analysis Ready Data as well as new data as it is obtained from satellites and science model outputs.</p></li>
<li><p>Client Libraries, Documentation, and Tutorials - enable science users to automate the collection and processing of land change data and develop new science models.</p></li>
</ol>

<h2 id="the-rest-service">The REST Service</h2>

<p>Since the LCMAP system service provides REST resource over HTTP, all of the client libraries are essentially wrappers around HTTP client libraries. To provide the best possible developer experience, these libraries strive to handle configuration, cumbersom tasks, or multiple calls as cleanly as possible with as little direct intervention on the part of the user as makes good, clean sense.</p>

<h2 id="users-and-roles">Users and Roles</h2>

<p>In order to use the LCMAP service, you need to be authenticated as a value user. To do this, you will need to register an account with the <a href="https://ers.cr.usgs.gov/login/">USGS ERS</a> service (or use an existing one). Registration is simple and only takes a few seconds. After submitting your registration and verifying your email address, you will be ready to use the LCMAP REST service.</p>

<h2 id="important-developer-notes">Important Developer Notes</h2>

<p>That being said, there are key things every developer should keep in mind, in order to better understand how the LCMAP service and its associated libraries work. This will aide in better code and provide the proper background in the event that debugging becomes necessary in your project.</p>

<p>Important things to note and remember:</p>

<ul>
<li>There is no version number in the URL; the version is passed in an <code class="prettyprint">Accept</code>
header.</li>
<li>File extensions in a query string (e.g., <code class="prettyprint">/some-resource?xml</code>) are not
used to determine the content type; this is done using headers (<code class="prettyprint">Accept</code>
and <code class="prettyprint">Content-Type</code>).</li>
<li>An authentication token is used in place of an API key; this is handled for
you automatically as soon as you have logged in to the USGS authentication
service.</li>
</ul>

<h2 id="conventions">Conventions</h2>

<p>We use styled call-outs to provide immediate visual cues about the nature of
the information being shared.</p>

<p>These are as follows:</p>

<aside class="info">
This style indicates useful information, background, or other insights.
</aside>

<aside class="success">
This style indicates a best practice, good usage, and other tips for success.
</aside>

<aside class="caution">
This style indicates one should use caution or that behaviour may not be as
expected
</aside>

<aside class="danger">
This style indicates information that could cause errors if ignored.
</aside>

<h2 id="api-organization">API Organization</h2>

<p>The LCMAP REST service and client APIs have been organized into several key areas:</p>

<ul>
<li><strong>General</strong> calls such as client initialization and user authentication</li>
<li><strong>Querying</strong> calls such as for Analysis Ready Data (ARD) or previous results from executing supported science models</li>
<li><strong>Subscription</strong> calls related to services for notifying users of subscribed land-change events</li>
<li><strong>Model Execution</strong> calls such as performing runs to build model data based on previous stored data or making predictions based on previous model runs</li>
<li><strong>Management</strong> calls such as system status, maintaining users, and modifying roles</li>
</ul>

<p>Each of these is discussed in more detail below.</p>

          <h1 id="development-environment">Development Environment</h1>

<p>If you wish to develop client libraries for the LCMAP system, it may be more convenient to run a local instance of the development environment.</p>

<h2 id="install-dependencies">Install Dependencies</h2>

<p>Developers using Ubuntu 14.04 can run <code class="prettyprint">make install</code> to install the following:</p>
<pre class="highlight shell"><code>make install
</code></pre>

<ul>
<li>GDAL 1.11.2</li>
<li>Leiningen 2</li>
<li>Oracle Java 8</li>
<li>Python 3</li>
<li>Ruby 1.9.3</li>
<li>Apache Cassandra 2.1.14</li>
<li>Apache Mesos 0.28.2</li>
<li>Marathon</li>
<li>Chronos</li>
<li>Apache Zookeeper</li>
<li>RabbitMQ 3.2.4</li>
<li>Docker 1.11</li>
<li>NGINX 1.4.6</li>
</ul>

<h3 id="web-consoles">Web Consoles</h3>

<p>Following installation of the above dependencies, these administrative consoles should be running.</p>

<ul>
<li><a href="http://localhost:5050/">Mesos</a></li>
<li><a href="http://localhost:8080/">Marathon</a></li>
<li><a href="http://localhost:4400/">Chronos</a></li>
<li><a href="http://localhost:15672/">RabbitMQ</a> (guest/guest)</li>
</ul>

<h2 id="get-lcmap-projects">Get LCMAP Projects</h2>
<pre class="highlight shell"><code>
<span class="c"># Optional, but recommended.</span>
<span class="nb">export </span><span class="nv">LCMAP_HOME</span><span class="o">=</span><span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/Projects/lcmap"</span>
<span class="nb">export </span><span class="nv">CDPATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$CDPATH</span><span class="s2">:</span><span class="nv">$LCMAP_HOME</span><span class="s2">"</span>

<span class="c"># Uses git to clone lcmap-* repositories</span>
make clone
</code></pre>

<p>Download LCMAP project by running <code class="prettyprint">make clone</code>. Set <code class="prettyprint">LCMAP_HOME</code> environment variable to override the default <code class="prettyprint">~/Projects/lcmap</code> location.</p>

<ul>
<li>lcmap-client-clj</li>
<li>lcmap-client-py</li>
<li>lcmap-config</li>
<li>lcmap-data</li>
<li>lcmap-dockerfiles</li>
<li>lcmap-event</li>
<li>lcmap-logger</li>
<li>lcmap-rest</li>
<li>lcmap-see</li>
<li>lcmap-model-wrapper</li>
</ul>

<h2 id="load-sample-data">Load Sample Data</h2>
<pre class="highlight shell"><code><span class="c"># assuming $LCMAP_HOME and $CDPATH are set...</span>
<span class="nb">cd </span>lcmap-data
make db-setup
</code></pre>

<p>Use the <a href="https://github.com/usgs-eros/lcmap-data">lcmap-data</a> project to load a schema, tile-specs, and sample tile data. This loads a small (~60M) amount of Landsat 5/7 surface reflectance, top of atmosphere, and various indices during 2002-01-01/2002-12-31 covering an approximately four square kilometer area in Washington state.</p>

<p>See <a href="https://github.com/usgs-eros/lcmap-test-data">lcmap-test-data</a> for more information.</p>

<h2 id="start-rest-api">Start REST API</h2>

<p>The <code class="prettyprint">lcmap-system</code> project contains a make target to start the LCMAP REST API and a test authentication service.</p>
<pre class="highlight shell"><code><span class="c"># assuming $LCMAP_HOME and $CDPATH are set...</span>
<span class="nb">cd </span>lcmap-system
make run
</code></pre>

<p>At this point you may develop against the lcmap-rest services you have running locally.</p>

          <h1 id="previous-versions">Previous Versions</h1>

<p>Documentation is available for all previous releases:</p>

<ul>
<li><a href="../current/">Development version</a></li>
<li><a href="../current/">0.1.0</a> (Alpha - currently in development)</li>
<li><a href="../0.0.1/">0.0.1</a> (Prototype)</li>
</ul>

          <h1 id="license">License</h1>

<p>Copyright &copy; 2015 United States Government</p>

<p><a href="https://raw.githubusercontent.com/USGS-EROS/lcmap-client-py/master/LICENSE">NASA Open Source Agreement, Version 1.3</a></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">Bash</a>
          </div>
      </div>
    </div>
  </body>
</html>
